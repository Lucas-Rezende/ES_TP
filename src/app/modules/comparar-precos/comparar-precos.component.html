<div class="comparison-container">
  <header class="app-header">
    <h1>üçî Comparador de Pre√ßos</h1>
    <p>Compare os pre√ßos entre as lanchonetes e fa√ßa a melhor escolha!</p>
  </header>

  <div class="controls">
    <button (click)="toggleModoVisualizacao()" class="sort-button">
      {{
        modoVisualizacao === "alfabetica"
          ? "Ordenar por Pre√ßo M√©dio"
          : "Ordenar Alfabeticamente"
      }}
    </button>

    <select (change)="destacarItem($event)" class="item-selector">
      <option value="">Selecionar Item</option>
      <option *ngFor="let item of itens" [value]="item.Item">
        {{ item.Item }}
      </option>
    </select>
  </div>

  <div class="highlights" *ngIf="itens.length && lanchonetes.length">
    <div class="highlight-card">
      <h3>Menor Pre√ßo M√©dio</h3>
      <p *ngIf="lanchoneteMenorMedia; else semMedia">
        üèÜ {{ lanchoneteMenorMedia }}
      </p>
      <ng-template #semMedia><p>-</p></ng-template>
    </div>

    <div class="highlight-card">
      <h3>Melhor Pre√ßo para {{ itemSelecionado }}</h3>
      <p *ngIf="lanchoneteComMenorPreco && menorPreco; else semSelecionado">
        üí∞ {{ lanchoneteComMenorPreco }} | R$ {{ menorPreco }}
      </p>
      <ng-template #semSelecionado><p>-</p></ng-template>
    </div>


  <div class="table-wrapper">
    <table class="price-comparison-table">
      <thead>
        <tr>
          <th class="item-header">Item</th>
          <th
            *ngFor="let lanchonete of lanchonetes"
            [class.destacado]="isLanchonete(lanchonete.Nome)"
          >
            {{ lanchonete.Nome }}
          </th>
          <th *ngIf="modoVisualizacao === 'precoMedio'">Pre√ßo M√©dio</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of itens">
          <td class="item-name">{{ item.Item }}</td>
          <td
            *ngFor="let lanchonete of lanchonetes"
            [class.destacado]="isMenorPreco(item, lanchonete.Nome)"
          >
            <ng-container *ngIf="getPreco(item, lanchonete.Nome); else vazio">
              R$ {{ getPreco(item, lanchonete.Nome) }}
            </ng-container>
            <ng-template #vazio>
              <span class="nao-disponivel">-</span>
            </ng-template>
          </td>
          <td *ngIf="modoVisualizacao === 'precoMedio'" class="average-price">
            R$ {{ calcularPrecoMedio(item).toFixed(2) }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <a href="/" class="fab-home" aria-label="Home">üè†</a>
</div>
